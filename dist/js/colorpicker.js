/*! Colorpicker v1.1.1 | (c) Philipp KÃ¶nig under Apache-2.0 | https://blockbyte.de */
window.Colorpicker=(()=>{"use strict";function t(){this.r=0,this.g=0,this.b=0,this.a=1,this.hue=0,this.saturation=0,this.value=0;let t=t=>"number"==typeof t&&!1===isNaN(t),e=(e,i,s,a)=>{t(e)&&t(i)&&t(s)&&(this.r=Math.max(0,Math.min(255,Math.trunc(e))),this.g=Math.max(0,Math.min(255,Math.trunc(i))),this.b=Math.max(0,Math.min(255,Math.trunc(s))),!0===t(a)&&(this.a=Math.max(0,Math.min(1,a))))},i=t=>{let i=t.match(/(\d*\.\d*|\d+)/g);3===i.length&&i.push(1),4===i.length&&(e(...i.map(t=>+t)),h())},s=t=>{/(^#{0,1}[0-9A-F]{6}$)|(^#{0,1}[0-9A-F]{3}$)/i.test(t)&&("#"===t[0]&&(t=t.slice(1,t.length)),3===t.length&&(t=t.replace(/([0-9A-F])([0-9A-F])([0-9A-F])/i,"$1$1$2$2$3$3")),this.r=parseInt(t.substr(0,2),16),this.g=parseInt(t.substr(2,2),16),this.b=parseInt(t.substr(4,2),16),this.a=1,h())},a=()=>{let t=this.saturation/100,i=this.value/100,s=t*i,a=this.hue/60,h=s*(1-Math.abs(a%2-1)),r=i-s;s=Math.trunc(255*(s+r)),h=Math.trunc(255*(h+r)),r=Math.trunc(255*r),a>=0&&a<1?e(s,h,r):a>=1&&a<2?e(h,s,r):a>=2&&a<3?e(r,s,h):a>=3&&a<4?e(r,h,s):a>=4&&a<5?e(h,r,s):a>=5&&a<6&&e(s,r,h)},h=()=>{let t=this.r/255,e=this.g/255,i=this.b/255,s=Math.max(t,e,i),a=s-Math.min(t,e,i),h=0,r=0;a&&(s===t&&(h=(e-i)/a),s===e&&(h=2+(i-t)/a),s===i&&(h=4+(t-e)/a),s&&(r=a/s)),this.hue=Math.trunc(60*h),this.hue<0&&(this.hue+=360),this.saturation=Math.trunc(100*r),this.value=Math.trunc(100*s)};this.setFromRaw=(t=>{"transparent"===(t=t.trim())?(this.r=0,this.g=0,this.b=0,this.a=0,h()):/(^#{0,1}[0-9A-F]{6}$)|(^#{0,1}[0-9A-F]{3}$)/i.test(t)?s(t):/^rgba?\([^)]+\)$/i.test(t)&&i(t)}),this.setByName=((e,i)=>{if(("r"===e||"g"===e||"b"===e||"a"===e)&&t(i)){let t=1;"a"!==e&&(i=Math.trunc(i),t=255),this[e]=Math.max(0,Math.min(t,i)),h()}}),this.setHSV=((e,i,s)=>{t(e)&&t(i)&&t(s)&&(this.hue=Math.max(0,Math.min(360,e)),this.saturation=Math.max(0,Math.min(100,i)),this.value=Math.max(0,Math.min(100,s)),a())}),this.setHue=(e=>{t(e)&&(this.hue=Math.max(0,Math.min(360,e)),a())}),this.getHex=(()=>{let t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return this.r<16&&(t="0"+t),this.g<16&&(e="0"+e),this.b<16&&(i="0"+i),("#"+t+e+i).toLowerCase()}),this.getColor=(()=>{if(1===Math.trunc(this.a))return this.getHex();let t="("+this.r+","+this.g+","+this.b,e="",i="",s=parseFloat(this.a);return 1!==s&&(e="a",i=","+s),"rgb"+e+t+i+")"})}return function(e,i){i=i||{};let s=null,a=null,h=null,r=[],l={};this.color=new t;let o=(t,e)=>{t.addEventListener("mousedown",t=>{e(t),document.addEventListener("mousemove",e)}),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",e)})},n=()=>{(s=document.createElement("div")).className="color-picker",document.body.appendChild(s),(a=document.createElement("span")).className="color-preview",e.parentNode.insertBefore(a,e.nextSibling),e.ownerDocument.defaultView.addEventListener("resize",()=>{this.reposition()}),a.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),[].forEach.call(document.getElementsByClassName("color-picker"),t=>{t.classList.remove("visible")}),s.classList.add("visible"),this.reposition(),x("show"),m()}),document.addEventListener("click",t=>{t.target===s||s.contains(t.target)||this.close()})},c=()=>{let t=document.createElement("div"),e=document.createElement("div");t.className="picking-area",e.className="picker",this.pickingArea=t,this.colorPicker=e,o(t,t=>{let e=this.pickingArea.getBoundingClientRect(),i=this.pickingArea.clientWidth,s=[t.pageX-e.left,t.pageY-e.top];s.forEach((t,e)=>{t>i&&(t=i),t<0&&(t=0),s[e]=t});let a=Math.trunc(100*s[0]/i),h=100-Math.trunc(100*s[1]/i);this.color.setHSV(this.color.hue,a,h),this.colorPicker.style.left=s[0]-5+"px",this.colorPicker.style.top=s[1]-5+"px",b(),k(),C()}),t.appendChild(e),s.appendChild(t)},u=()=>{let t=document.createElement("div"),e=document.createElement("div");t.className="hue",e.className="slider-picker",this.hueArea=t,this.huePicker=e,o(t,t=>{let e=this.hueArea.getBoundingClientRect(),i=Math.max(0,t.pageX-e.left),s=this.hueArea.clientWidth;i>s&&(i=s),this.huePicker.style.left=Math.max(i-3,-2)+"px",this.color.setHue(Math.trunc(359*i/s)),m()}),t.appendChild(e),s.appendChild(t)},d=()=>{let t=document.createElement("div"),e=document.createElement("div"),i=document.createElement("div");t.className="alpha",e.className="alpha-mask",i.className="slider-picker",h={area:t,mask:e,picker:i},o(t,t=>{let e=h.area.getBoundingClientRect(),i=t.pageX-e.left,s=h.area.clientWidth;i<0&&(i=0),i>s&&(i=s),this.color.setByName("a",+(i/s).toFixed(2)),h.picker.style.left=Math.max(i-3,-2)+"px",k(),C()}),t.appendChild(e),e.appendChild(i),s.appendChild(t)},p=(t,e)=>{let i=document.createElement("div"),a=document.createElement("input"),h=document.createElement("span");i.className="input-"+t,h.textContent=t,a.setAttribute("type","text"),i.appendChild(h),i.appendChild(a),s.appendChild(i),a.addEventListener("change",e),r[t]=(t=>{a.value=t})},m=()=>{C(),v(),f(),g(),M(),b(),k()},g=()=>{let t=this.pickingArea.clientWidth,e=this.color.value,i=Math.trunc(this.color.saturation*t/100),s=t-Math.trunc(e*t/100);this.colorPicker.style.left=i-5+"px",this.colorPicker.style.top=s-5+"px"},v=()=>{let t=this.hueArea.clientWidth,e=Math.trunc(this.color.hue*t/360);this.huePicker.style.left=e-1+"px"},M=()=>{if(h){let t=h.area.clientWidth,e=Math.trunc(this.color.a*t);h.picker.style.left=e-1+"px"}},f=()=>{let e=new t;e.setHSV(this.color.hue,100,100),this.pickingArea.style.backgroundColor=e.getHex()},b=()=>{h&&(h.mask.style.background="linear-gradient(to right, transparent 0%,"+this.color.getHex()+" 100%)")},k=()=>{e.value=this.color.getColor(),a.style.backgroundColor=this.color.getColor(),x("change")},x=t=>{void 0!==l[t]&&l[t].forEach(t=>{t({color:this.color.getColor(),colorObj:this.color,elm:this.getElements()})})},C=()=>{E("r",this.color.r),E("g",this.color.g),E("b",this.color.b),E("a",this.color.a),E("color",this.color.getColor())},E=(t,e)=>{r[t]&&r[t](e)};this.setColor=(t=>{this.color.setFromRaw(t),m()}),this.getColorObj=(()=>this.color),this.getElements=(()=>({wrapper:s,preview:a,field:e})),this.reposition=(()=>{if(s.classList.contains("visible")){let t=["bottom","left"],e=a.getBoundingClientRect(),i=e.top+a.offsetHeight,h=e.left;s.offsetHeight+i>window.innerHeight&&(i=e.top-s.offsetHeight,t[0]="top"),s.offsetWidth+h>window.innerWidth&&(h=e.left-s.offsetWidth+a.offsetWidth,t[1]="right"),s.setAttribute("data-pos",t.join("-")),s.style.top=i+"px",s.style.left=h+"px"}}),this.close=(()=>{s.classList.contains("visible")&&(x("hide"),s.classList.remove("visible"))}),this.on=((t,e)=>{void 0===l[t]&&(l[t]=[]),l[t].push(e)}),(()=>{n(),c(),u();let t=["r","g","b"];i.alpha&&(d(),t.push("a")),t.forEach(t=>{p(t,e=>{let i=e.target.value;i="a"===t?+i.replace(/,/g,"."):parseInt(i),this.color.setByName(t,i),e.target.value=this.color[t],m()})}),p("color",t=>{let e=t.target.value;this.color.setFromRaw(e),m()}),m()})()}})();